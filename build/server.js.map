{"version":3,"sources":["../server/server.js"],"names":["load","connect","process","env","DATABASE_URL","db","connection","server","port","PORT","use","static","join","__dirname","NODE_ENV","urlencoded","extended","json","get","req","res","sendFile","listen","info"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,iBAAOA,IAAP;;AAEA,mBAASC,OAAT,CAAiBC,QAAQC,GAAR,CAAYC,YAA7B;;AAEA,IAAIC,KAAK,mBAASC,UAAlB;;AAEA,IAAMC,SAAS,wBAAf;AACA,IAAMC,OAAON,QAAQC,GAAR,CAAYM,IAAZ,IAAoB,IAAjC;;AAEAF,OAAOG,GAAP,CAAW,kBAAQC,MAAR,CAAe,UAAf,CAAX,E,CAAwC;AACxCJ,OAAOG,GAAP,CAAW,kBAAQC,MAAR,CAAe,eAAKC,IAAL,CAAUC,SAAV,EAAqB,kBAArB,CAAf,CAAX,E,CAAsE;;AAEtE,IAAIX,QAAQC,GAAR,CAAYW,QAAZ,KAAyB,aAA7B,EAA4C;AAC3CP,QAAOG,GAAP,CAAW,oCAAkB,+CAAlB,CAAX;AACA;;AAEDH,OAAOG,GAAP,CAAW,qBAAWK,UAAX,CAAsB,EAAEC,UAAU,IAAZ,EAAtB,CAAX;AACAT,OAAOG,GAAP,CAAW,qBAAWO,IAAX,EAAX;AACAV,OAAOG,GAAP,CAAW,iCAAX;;AAEAH,OAAOG,GAAP,CAAW,eAAX;AACAH,OAAOG,GAAP,CAAW,kBAAX;AACAH,OAAOG,GAAP,CAAW,kBAAX;;AAEAH,OAAOW,GAAP,CAAW,GAAX,EAAgB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC7BA,KAAIC,QAAJ,CAAa,eAAKT,IAAL,CAAUC,SAAV,EAAqB,sBAArB,CAAb;AACA,CAFD;;AAIAN,OAAOe,MAAP,CAAcd,IAAd;;AAEA,kBAAQe,IAAR,CAAa,4BAA4Bf,IAAzC","file":"server.js","sourcesContent":["import express from 'express';\nimport winston from 'winston';\nimport mongoose from 'mongoose';\nimport dotenv from 'dotenv';\nimport bodyParser from 'body-parser';\nimport webpackMiddleware from 'webpack-dev-middleware';\nimport webpack from 'webpack';\nimport validator from 'express-validator';\nimport webpackConfigDev from '../webpack.config.dev';\nimport path from 'path';\nimport userRouter from './routes/userRouter';\nimport articleRouter from './routes/articleRouter';\nimport commentRouter from './routes/commentRouter';\n\ndotenv.load();\n\nmongoose.connect(process.env.DATABASE_URL);\n\nlet db = mongoose.connection;\n\nconst server = express();\nconst port = process.env.PORT || 3000;\n\nserver.use(express.static('/client/')); // configure static files folder\nserver.use(express.static(path.join(__dirname, '../client/public'))); // configure static files folder\n\nif (process.env.NODE_ENV === 'development') {\n\tserver.use(webpackMiddleware(webpack(webpackConfigDev)));\n}\n\nserver.use(bodyParser.urlencoded({ extended: true }));\nserver.use(bodyParser.json());\nserver.use(validator());\n\nserver.use('/api/v1/users', userRouter);\nserver.use('/api/v1/articles', articleRouter);\nserver.use('/api/v1/comments', commentRouter);\n\nserver.get('*', (req, res) => {\n\tres.sendFile(path.join(__dirname, '../client/index.html'));\n});\n\nserver.listen(port);\n\nwinston.info('App connected to port: ' + port);\n"]}